{"version":3,"sources":["../../../../node_modules/styled-jsx/dist/index/index.js","../../../../node_modules/styled-jsx/style.js","../../../../node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/head-manager-context.ts","../../../../node_modules/next/src/client/set-attributes-from-props.ts","../../../../node_modules/next/src/client/request-idle-callback.ts","../../../../node_modules/next/src/client/script.tsx","../../../../node_modules/next/script.js","../../../../components/Editor.js","../../../../components/Sidebar.js","../../../../app/page.js","../../../../utils/aiTools.js","../../../../services/supabaseService.js","../../../../node_modules/dompurify/src/utils.ts","../../../../hooks/useAI.js","../../../../node_modules/dompurify/src/tags.ts","../../../../node_modules/dompurify/src/attrs.ts","../../../../node_modules/dompurify/src/regexp.ts","../../../../node_modules/dompurify/src/purify.ts"],"sourcesContent":["require('client-only');\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n/*\nBased on Glamor's sheet\nhttps://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/src/sheet.js\n*/ function _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nvar isProd = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === \"production\";\nvar isString = function(o) {\n    return Object.prototype.toString.call(o) === \"[object String]\";\n};\nvar StyleSheet = /*#__PURE__*/ function() {\n    function StyleSheet(param) {\n        var ref = param === void 0 ? {} : param, _name = ref.name, name = _name === void 0 ? \"stylesheet\" : _name, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? isProd : _optimizeForSpeed;\n        invariant$1(isString(name), \"`name` must be a string\");\n        this._name = name;\n        this._deletedRulePlaceholder = \"#\" + name + \"-deleted-rule____{}\";\n        invariant$1(typeof optimizeForSpeed === \"boolean\", \"`optimizeForSpeed` must be a boolean\");\n        this._optimizeForSpeed = optimizeForSpeed;\n        this._serverSheet = undefined;\n        this._tags = [];\n        this._injected = false;\n        this._rulesCount = 0;\n        var node = typeof window !== \"undefined\" && document.querySelector('meta[property=\"csp-nonce\"]');\n        this._nonce = node ? node.getAttribute(\"content\") : null;\n    }\n    var _proto = StyleSheet.prototype;\n    _proto.setOptimizeForSpeed = function setOptimizeForSpeed(bool) {\n        invariant$1(typeof bool === \"boolean\", \"`setOptimizeForSpeed` accepts a boolean\");\n        invariant$1(this._rulesCount === 0, \"optimizeForSpeed cannot be when rules have already been inserted\");\n        this.flush();\n        this._optimizeForSpeed = bool;\n        this.inject();\n    };\n    _proto.isOptimizeForSpeed = function isOptimizeForSpeed() {\n        return this._optimizeForSpeed;\n    };\n    _proto.inject = function inject() {\n        var _this = this;\n        invariant$1(!this._injected, \"sheet already injected\");\n        this._injected = true;\n        if (typeof window !== \"undefined\" && this._optimizeForSpeed) {\n            this._tags[0] = this.makeStyleTag(this._name);\n            this._optimizeForSpeed = \"insertRule\" in this.getSheet();\n            if (!this._optimizeForSpeed) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\");\n                }\n                this.flush();\n                this._injected = true;\n            }\n            return;\n        }\n        this._serverSheet = {\n            cssRules: [],\n            insertRule: function(rule, index) {\n                if (typeof index === \"number\") {\n                    _this._serverSheet.cssRules[index] = {\n                        cssText: rule\n                    };\n                } else {\n                    _this._serverSheet.cssRules.push({\n                        cssText: rule\n                    });\n                }\n                return index;\n            },\n            deleteRule: function(index) {\n                _this._serverSheet.cssRules[index] = null;\n            }\n        };\n    };\n    _proto.getSheetForTag = function getSheetForTag(tag) {\n        if (tag.sheet) {\n            return tag.sheet;\n        }\n        // this weirdness brought to you by firefox\n        for(var i = 0; i < document.styleSheets.length; i++){\n            if (document.styleSheets[i].ownerNode === tag) {\n                return document.styleSheets[i];\n            }\n        }\n    };\n    _proto.getSheet = function getSheet() {\n        return this.getSheetForTag(this._tags[this._tags.length - 1]);\n    };\n    _proto.insertRule = function insertRule(rule, index) {\n        invariant$1(isString(rule), \"`insertRule` accepts only strings\");\n        if (typeof window === \"undefined\") {\n            if (typeof index !== \"number\") {\n                index = this._serverSheet.cssRules.length;\n            }\n            this._serverSheet.insertRule(rule, index);\n            return this._rulesCount++;\n        }\n        if (this._optimizeForSpeed) {\n            var sheet = this.getSheet();\n            if (typeof index !== \"number\") {\n                index = sheet.cssRules.length;\n            }\n            // this weirdness for perf, and chrome's weird bug\n            // https://stackoverflow.com/questions/20007992/chrome-suddenly-stopped-accepting-insertrule\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                return -1;\n            }\n        } else {\n            var insertionPoint = this._tags[index];\n            this._tags.push(this.makeStyleTag(this._name, rule, insertionPoint));\n        }\n        return this._rulesCount++;\n    };\n    _proto.replaceRule = function replaceRule(index, rule) {\n        if (this._optimizeForSpeed || typeof window === \"undefined\") {\n            var sheet = typeof window !== \"undefined\" ? this.getSheet() : this._serverSheet;\n            if (!rule.trim()) {\n                rule = this._deletedRulePlaceholder;\n            }\n            if (!sheet.cssRules[index]) {\n                // @TBD Should we throw an error?\n                return index;\n            }\n            sheet.deleteRule(index);\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                // In order to preserve the indices we insert a deleteRulePlaceholder\n                sheet.insertRule(this._deletedRulePlaceholder, index);\n            }\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"old rule at index `\" + index + \"` not found\");\n            tag.textContent = rule;\n        }\n        return index;\n    };\n    _proto.deleteRule = function deleteRule(index) {\n        if (typeof window === \"undefined\") {\n            this._serverSheet.deleteRule(index);\n            return;\n        }\n        if (this._optimizeForSpeed) {\n            this.replaceRule(index, \"\");\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"rule at index `\" + index + \"` not found\");\n            tag.parentNode.removeChild(tag);\n            this._tags[index] = null;\n        }\n    };\n    _proto.flush = function flush() {\n        this._injected = false;\n        this._rulesCount = 0;\n        if (typeof window !== \"undefined\") {\n            this._tags.forEach(function(tag) {\n                return tag && tag.parentNode.removeChild(tag);\n            });\n            this._tags = [];\n        } else {\n            // simpler on server\n            this._serverSheet.cssRules = [];\n        }\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        if (typeof window === \"undefined\") {\n            return this._serverSheet.cssRules;\n        }\n        return this._tags.reduce(function(rules, tag) {\n            if (tag) {\n                rules = rules.concat(Array.prototype.map.call(_this.getSheetForTag(tag).cssRules, function(rule) {\n                    return rule.cssText === _this._deletedRulePlaceholder ? null : rule;\n                }));\n            } else {\n                rules.push(null);\n            }\n            return rules;\n        }, []);\n    };\n    _proto.makeStyleTag = function makeStyleTag(name, cssString, relativeToTag) {\n        if (cssString) {\n            invariant$1(isString(cssString), \"makeStyleTag accepts only strings as second parameter\");\n        }\n        var tag = document.createElement(\"style\");\n        if (this._nonce) tag.setAttribute(\"nonce\", this._nonce);\n        tag.type = \"text/css\";\n        tag.setAttribute(\"data-\" + name, \"\");\n        if (cssString) {\n            tag.appendChild(document.createTextNode(cssString));\n        }\n        var head = document.head || document.getElementsByTagName(\"head\")[0];\n        if (relativeToTag) {\n            head.insertBefore(tag, relativeToTag);\n        } else {\n            head.appendChild(tag);\n        }\n        return tag;\n    };\n    _createClass(StyleSheet, [\n        {\n            key: \"length\",\n            get: function get() {\n                return this._rulesCount;\n            }\n        }\n    ]);\n    return StyleSheet;\n}();\nfunction invariant$1(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheet: \" + message + \".\");\n    }\n}\n\nfunction hash(str) {\n    var _$hash = 5381, i = str.length;\n    while(i){\n        _$hash = _$hash * 33 ^ str.charCodeAt(--i);\n    }\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */ return _$hash >>> 0;\n}\nvar stringHash = hash;\n\nvar sanitize = function(rule) {\n    return rule.replace(/\\/style/gi, \"\\\\/style\");\n};\nvar cache = {};\n/**\n * computeId\n *\n * Compute and memoize a jsx id from a basedId and optionally props.\n */ function computeId(baseId, props) {\n    if (!props) {\n        return \"jsx-\" + baseId;\n    }\n    var propsToString = String(props);\n    var key = baseId + propsToString;\n    if (!cache[key]) {\n        cache[key] = \"jsx-\" + stringHash(baseId + \"-\" + propsToString);\n    }\n    return cache[key];\n}\n/**\n * computeSelector\n *\n * Compute and memoize dynamic selectors.\n */ function computeSelector(id, css) {\n    var selectoPlaceholderRegexp = /__jsx-style-dynamic-selector/g;\n    // Sanitize SSR-ed CSS.\n    // Client side code doesn't need to be sanitized since we use\n    // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n    if (typeof window === \"undefined\") {\n        css = sanitize(css);\n    }\n    var idcss = id + css;\n    if (!cache[idcss]) {\n        cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n    }\n    return cache[idcss];\n}\n\nfunction mapRulesToStyle(cssRules, options) {\n    if (options === void 0) options = {};\n    return cssRules.map(function(args) {\n        var id = args[0];\n        var css = args[1];\n        return /*#__PURE__*/ React__default[\"default\"].createElement(\"style\", {\n            id: \"__\" + id,\n            // Avoid warnings upon render with a key\n            key: \"__\" + id,\n            nonce: options.nonce ? options.nonce : undefined,\n            dangerouslySetInnerHTML: {\n                __html: css\n            }\n        });\n    });\n}\nvar StyleSheetRegistry = /*#__PURE__*/ function() {\n    function StyleSheetRegistry(param) {\n        var ref = param === void 0 ? {} : param, _styleSheet = ref.styleSheet, styleSheet = _styleSheet === void 0 ? null : _styleSheet, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? false : _optimizeForSpeed;\n        this._sheet = styleSheet || new StyleSheet({\n            name: \"styled-jsx\",\n            optimizeForSpeed: optimizeForSpeed\n        });\n        this._sheet.inject();\n        if (styleSheet && typeof optimizeForSpeed === \"boolean\") {\n            this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    }\n    var _proto = StyleSheetRegistry.prototype;\n    _proto.add = function add(props) {\n        var _this = this;\n        if (undefined === this._optimizeForSpeed) {\n            this._optimizeForSpeed = Array.isArray(props.children);\n            this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        if (typeof window !== \"undefined\" && !this._fromServer) {\n            this._fromServer = this.selectFromServer();\n            this._instancesCounts = Object.keys(this._fromServer).reduce(function(acc, tagName) {\n                acc[tagName] = 0;\n                return acc;\n            }, {});\n        }\n        var ref = this.getIdAndRules(props), styleId = ref.styleId, rules = ref.rules;\n        // Deduping: just increase the instances count.\n        if (styleId in this._instancesCounts) {\n            this._instancesCounts[styleId] += 1;\n            return;\n        }\n        var indices = rules.map(function(rule) {\n            return _this._sheet.insertRule(rule);\n        })// Filter out invalid rules\n        .filter(function(index) {\n            return index !== -1;\n        });\n        this._indices[styleId] = indices;\n        this._instancesCounts[styleId] = 1;\n    };\n    _proto.remove = function remove(props) {\n        var _this = this;\n        var styleId = this.getIdAndRules(props).styleId;\n        invariant(styleId in this._instancesCounts, \"styleId: `\" + styleId + \"` not found\");\n        this._instancesCounts[styleId] -= 1;\n        if (this._instancesCounts[styleId] < 1) {\n            var tagFromServer = this._fromServer && this._fromServer[styleId];\n            if (tagFromServer) {\n                tagFromServer.parentNode.removeChild(tagFromServer);\n                delete this._fromServer[styleId];\n            } else {\n                this._indices[styleId].forEach(function(index) {\n                    return _this._sheet.deleteRule(index);\n                });\n                delete this._indices[styleId];\n            }\n            delete this._instancesCounts[styleId];\n        }\n    };\n    _proto.update = function update(props, nextProps) {\n        this.add(nextProps);\n        this.remove(props);\n    };\n    _proto.flush = function flush() {\n        this._sheet.flush();\n        this._sheet.inject();\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function(styleId) {\n            return [\n                styleId,\n                _this._fromServer[styleId]\n            ];\n        }) : [];\n        var cssRules = this._sheet.cssRules();\n        return fromServer.concat(Object.keys(this._indices).map(function(styleId) {\n            return [\n                styleId,\n                _this._indices[styleId].map(function(index) {\n                    return cssRules[index].cssText;\n                }).join(_this._optimizeForSpeed ? \"\" : \"\\n\")\n            ];\n        })// filter out empty rules\n        .filter(function(rule) {\n            return Boolean(rule[1]);\n        }));\n    };\n    _proto.styles = function styles(options) {\n        return mapRulesToStyle(this.cssRules(), options);\n    };\n    _proto.getIdAndRules = function getIdAndRules(props) {\n        var css = props.children, dynamic = props.dynamic, id = props.id;\n        if (dynamic) {\n            var styleId = computeId(id, dynamic);\n            return {\n                styleId: styleId,\n                rules: Array.isArray(css) ? css.map(function(rule) {\n                    return computeSelector(styleId, rule);\n                }) : [\n                    computeSelector(styleId, css)\n                ]\n            };\n        }\n        return {\n            styleId: computeId(id),\n            rules: Array.isArray(css) ? css : [\n                css\n            ]\n        };\n    };\n    /**\n   * selectFromServer\n   *\n   * Collects style tags from the document with id __jsx-XXX\n   */ _proto.selectFromServer = function selectFromServer() {\n        var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n        return elements.reduce(function(acc, element) {\n            var id = element.id.slice(2);\n            acc[id] = element;\n            return acc;\n        }, {});\n    };\n    return StyleSheetRegistry;\n}();\nfunction invariant(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheetRegistry: \" + message + \".\");\n    }\n}\nvar StyleSheetContext = /*#__PURE__*/ React.createContext(null);\nStyleSheetContext.displayName = \"StyleSheetContext\";\nfunction createStyleRegistry() {\n    return new StyleSheetRegistry();\n}\nfunction StyleRegistry(param) {\n    var configuredRegistry = param.registry, children = param.children;\n    var rootRegistry = React.useContext(StyleSheetContext);\n    var ref = React.useState(function() {\n        return rootRegistry || configuredRegistry || createStyleRegistry();\n    }), registry = ref[0];\n    return /*#__PURE__*/ React__default[\"default\"].createElement(StyleSheetContext.Provider, {\n        value: registry\n    }, children);\n}\nfunction useStyleRegistry() {\n    return React.useContext(StyleSheetContext);\n}\n\n// Opt-into the new `useInsertionEffect` API in React 18, fallback to `useLayoutEffect`.\n// https://github.com/reactwg/react-18/discussions/110\nvar useInsertionEffect = React__default[\"default\"].useInsertionEffect || React__default[\"default\"].useLayoutEffect;\nvar defaultRegistry = typeof window !== \"undefined\" ? createStyleRegistry() : undefined;\nfunction JSXStyle(props) {\n    var registry = defaultRegistry ? defaultRegistry : useStyleRegistry();\n    // If `registry` does not exist, we do nothing here.\n    if (!registry) {\n        return null;\n    }\n    if (typeof window === \"undefined\") {\n        registry.add(props);\n        return null;\n    }\n    useInsertionEffect(function() {\n        registry.add(props);\n        return function() {\n            registry.remove(props);\n        };\n    // props.children can be string[], will be striped since id is identical\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    return null;\n}\nJSXStyle.dynamic = function(info) {\n    return info.map(function(tagInfo) {\n        var baseId = tagInfo[0];\n        var props = tagInfo[1];\n        return computeId(baseId, props);\n    }).join(\" \");\n};\n\nexports.StyleRegistry = StyleRegistry;\nexports.createStyleRegistry = createStyleRegistry;\nexports.style = JSXStyle;\nexports.useStyleRegistry = useStyleRegistry;\n","module.exports = require('./dist/index').style\n","\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HeadManagerContext\n","const DOMAttributeNames: Record<string, string> = {\n  acceptCharset: 'accept-charset',\n  className: 'class',\n  htmlFor: 'for',\n  httpEquiv: 'http-equiv',\n  noModule: 'noModule',\n}\n\nconst ignoreProps = [\n  'onLoad',\n  'onReady',\n  'dangerouslySetInnerHTML',\n  'children',\n  'onError',\n  'strategy',\n  'stylesheets',\n]\n\nfunction isBooleanScriptAttribute(\n  attr: string\n): attr is 'async' | 'defer' | 'noModule' {\n  return ['async', 'defer', 'noModule'].includes(attr)\n}\n\nexport function setAttributesFromProps(el: HTMLElement, props: object) {\n  for (const [p, value] of Object.entries(props)) {\n    if (!props.hasOwnProperty(p)) continue\n    if (ignoreProps.includes(p)) continue\n\n    // we don't render undefined props to the DOM\n    if (value === undefined) {\n      continue\n    }\n\n    const attr = DOMAttributeNames[p] || p.toLowerCase()\n\n    if (el.tagName === 'SCRIPT' && isBooleanScriptAttribute(attr)) {\n      // Correctly assign boolean script attributes\n      // https://github.com/vercel/next.js/pull/20748\n      ;(el as HTMLScriptElement)[attr] = !!value\n    } else {\n      el.setAttribute(attr, String(value))\n    }\n\n    // Remove falsy non-zero boolean attributes so they are correctly interpreted\n    // (e.g. if we set them to false, this coerces to the string \"false\", which the browser interprets as true)\n    if (\n      value === false ||\n      (el.tagName === 'SCRIPT' &&\n        isBooleanScriptAttribute(attr) &&\n        (!value || value === 'false'))\n    ) {\n      // Call setAttribute before, as we need to set and unset the attribute to override force async:\n      // https://html.spec.whatwg.org/multipage/scripting.html#script-force-async\n      el.setAttribute(attr, '')\n      el.removeAttribute(attr)\n    }\n  }\n}\n","export const requestIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.requestIdleCallback &&\n    self.requestIdleCallback.bind(window)) ||\n  function (cb: IdleRequestCallback): number {\n    let start = Date.now()\n    return self.setTimeout(function () {\n      cb({\n        didTimeout: false,\n        timeRemaining: function () {\n          return Math.max(0, 50 - (Date.now() - start))\n        },\n      })\n    }, 1)\n  }\n\nexport const cancelIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.cancelIdleCallback &&\n    self.cancelIdleCallback.bind(window)) ||\n  function (id: number) {\n    return clearTimeout(id)\n  }\n","'use client'\n\nimport ReactDOM from 'react-dom'\nimport React, { useEffect, useContext, useRef, type JSX } from 'react'\nimport type { ScriptHTMLAttributes } from 'react'\nimport { HeadManagerContext } from '../shared/lib/head-manager-context.shared-runtime'\nimport { setAttributesFromProps } from './set-attributes-from-props'\nimport { requestIdleCallback } from './request-idle-callback'\n\nconst ScriptCache = new Map()\nconst LoadCache = new Set()\n\nexport interface ScriptProps extends ScriptHTMLAttributes<HTMLScriptElement> {\n  strategy?: 'afterInteractive' | 'lazyOnload' | 'beforeInteractive' | 'worker'\n  id?: string\n  onLoad?: (e: any) => void\n  onReady?: () => void | null\n  onError?: (e: any) => void\n  children?: React.ReactNode\n  stylesheets?: string[]\n}\n\n/**\n * @deprecated Use `ScriptProps` instead.\n */\nexport type Props = ScriptProps\n\nconst insertStylesheets = (stylesheets: string[]) => {\n  // Case 1: Styles for afterInteractive/lazyOnload with appDir injected via handleClientScriptLoad\n  //\n  // Using ReactDOM.preinit to feature detect appDir and inject styles\n  // Stylesheets might have already been loaded if initialized with Script component\n  // Re-inject styles here to handle scripts loaded via handleClientScriptLoad\n  // ReactDOM.preinit handles dedup and ensures the styles are loaded only once\n  if (ReactDOM.preinit) {\n    stylesheets.forEach((stylesheet: string) => {\n      ReactDOM.preinit(stylesheet, { as: 'style' })\n    })\n\n    return\n  }\n\n  // Case 2: Styles for afterInteractive/lazyOnload with pages injected via handleClientScriptLoad\n  //\n  // We use this function to load styles when appdir is not detected\n  // TODO: Use React float APIs to load styles once available for pages dir\n  if (typeof window !== 'undefined') {\n    let head = document.head\n    stylesheets.forEach((stylesheet: string) => {\n      let link = document.createElement('link')\n\n      link.type = 'text/css'\n      link.rel = 'stylesheet'\n      link.href = stylesheet\n\n      head.appendChild(link)\n    })\n  }\n}\n\nconst loadScript = (props: ScriptProps): void => {\n  const {\n    src,\n    id,\n    onLoad = () => {},\n    onReady = null,\n    dangerouslySetInnerHTML,\n    children = '',\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n  } = props\n\n  const cacheKey = id || src\n\n  // Script has already loaded\n  if (cacheKey && LoadCache.has(cacheKey)) {\n    return\n  }\n\n  // Contents of this script are already loading/loaded\n  if (ScriptCache.has(src)) {\n    LoadCache.add(cacheKey)\n    // It is possible that multiple `next/script` components all have same \"src\", but has different \"onLoad\"\n    // This is to make sure the same remote script will only load once, but \"onLoad\" are executed in order\n    ScriptCache.get(src).then(onLoad, onError)\n    return\n  }\n\n  /** Execute after the script first loaded */\n  const afterLoad = () => {\n    // Run onReady for the first time after load event\n    if (onReady) {\n      onReady()\n    }\n    // add cacheKey to LoadCache when load successfully\n    LoadCache.add(cacheKey)\n  }\n\n  const el = document.createElement('script')\n\n  const loadPromise = new Promise<void>((resolve, reject) => {\n    el.addEventListener('load', function (e) {\n      resolve()\n      if (onLoad) {\n        onLoad.call(this, e)\n      }\n      afterLoad()\n    })\n    el.addEventListener('error', function (e) {\n      reject(e)\n    })\n  }).catch(function (e) {\n    if (onError) {\n      onError(e)\n    }\n  })\n\n  if (dangerouslySetInnerHTML) {\n    // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n    el.innerHTML = (dangerouslySetInnerHTML.__html as string) || ''\n\n    afterLoad()\n  } else if (children) {\n    el.textContent =\n      typeof children === 'string'\n        ? children\n        : Array.isArray(children)\n          ? children.join('')\n          : ''\n\n    afterLoad()\n  } else if (src) {\n    el.src = src\n    // do not add cacheKey into LoadCache for remote script here\n    // cacheKey will be added to LoadCache when it is actually loaded (see loadPromise above)\n\n    ScriptCache.set(src, loadPromise)\n  }\n\n  setAttributesFromProps(el, props)\n\n  if (strategy === 'worker') {\n    el.setAttribute('type', 'text/partytown')\n  }\n\n  el.setAttribute('data-nscript', strategy)\n\n  // Load styles associated with this script\n  if (stylesheets) {\n    insertStylesheets(stylesheets)\n  }\n\n  document.body.appendChild(el)\n}\n\nexport function handleClientScriptLoad(props: ScriptProps) {\n  const { strategy = 'afterInteractive' } = props\n  if (strategy === 'lazyOnload') {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  } else {\n    loadScript(props)\n  }\n}\n\nfunction loadLazyScript(props: ScriptProps) {\n  if (document.readyState === 'complete') {\n    requestIdleCallback(() => loadScript(props))\n  } else {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  }\n}\n\nfunction addBeforeInteractiveToCache() {\n  const scripts = [\n    ...document.querySelectorAll('[data-nscript=\"beforeInteractive\"]'),\n    ...document.querySelectorAll('[data-nscript=\"beforePageRender\"]'),\n  ]\n  scripts.forEach((script) => {\n    const cacheKey = script.id || script.getAttribute('src')\n    LoadCache.add(cacheKey)\n  })\n}\n\nexport function initScriptLoader(scriptLoaderItems: ScriptProps[]) {\n  scriptLoaderItems.forEach(handleClientScriptLoad)\n  addBeforeInteractiveToCache()\n}\n\n/**\n * Load a third-party scripts in an optimized way.\n *\n * Read more: [Next.js Docs: `next/script`](https://nextjs.org/docs/app/api-reference/components/script)\n */\nfunction Script(props: ScriptProps): JSX.Element | null {\n  const {\n    id,\n    src = '',\n    onLoad = () => {},\n    onReady = null,\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n    ...restProps\n  } = props\n\n  // Context is available only during SSR\n  let { updateScripts, scripts, getIsSsr, appDir, nonce } =\n    useContext(HeadManagerContext)\n\n  // if a nonce is explicitly passed to the script tag, favor that over the automatic handling\n  nonce = restProps.nonce || nonce\n\n  /**\n   * - First mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script hasn't loaded yet (not in LoadCache)\n   *      onReady is skipped, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. hasLoadScriptEffectCalled.current is false, loadScript executes\n   *      Once the script is loaded, the onLoad and onReady will be called by then\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   *\n   * - Second mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script has already loaded (found in LoadCache)\n   *      onReady is called, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. The script is already loaded, loadScript bails out\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   */\n  const hasOnReadyEffectCalled = useRef(false)\n\n  useEffect(() => {\n    const cacheKey = id || src\n    if (!hasOnReadyEffectCalled.current) {\n      // Run onReady if script has loaded before but component is re-mounted\n      if (onReady && cacheKey && LoadCache.has(cacheKey)) {\n        onReady()\n      }\n\n      hasOnReadyEffectCalled.current = true\n    }\n  }, [onReady, id, src])\n\n  const hasLoadScriptEffectCalled = useRef(false)\n\n  useEffect(() => {\n    if (!hasLoadScriptEffectCalled.current) {\n      if (strategy === 'afterInteractive') {\n        loadScript(props)\n      } else if (strategy === 'lazyOnload') {\n        loadLazyScript(props)\n      }\n\n      hasLoadScriptEffectCalled.current = true\n    }\n  }, [props, strategy])\n\n  if (strategy === 'beforeInteractive' || strategy === 'worker') {\n    if (updateScripts) {\n      scripts[strategy] = (scripts[strategy] || []).concat([\n        {\n          id,\n          src,\n          onLoad,\n          onReady,\n          onError,\n          ...restProps,\n          nonce,\n        },\n      ])\n      updateScripts(scripts)\n    } else if (getIsSsr && getIsSsr()) {\n      // Script has already loaded during SSR\n      LoadCache.add(id || src)\n    } else if (getIsSsr && !getIsSsr()) {\n      loadScript({\n        ...props,\n        nonce,\n      })\n    }\n  }\n\n  // For the app directory, we need React Float to preload these scripts.\n  if (appDir) {\n    // Injecting stylesheets here handles beforeInteractive and worker scripts correctly\n    // For other strategies injecting here ensures correct stylesheet order\n    // ReactDOM.preinit handles loading the styles in the correct order,\n    // also ensures the stylesheet is loaded only once and in a consistent manner\n    //\n    // Case 1: Styles for beforeInteractive/worker with appDir - handled here\n    // Case 2: Styles for beforeInteractive/worker with pages dir - Not handled yet\n    // Case 3: Styles for afterInteractive/lazyOnload with appDir - handled here\n    // Case 4: Styles for afterInteractive/lazyOnload with pages dir - handled in insertStylesheets function\n    if (stylesheets) {\n      stylesheets.forEach((styleSrc) => {\n        ReactDOM.preinit(styleSrc, { as: 'style' })\n      })\n    }\n\n    // Before interactive scripts need to be loaded by Next.js' runtime instead\n    // of native <script> tags, because they no longer have `defer`.\n    if (strategy === 'beforeInteractive') {\n      if (!src) {\n        // For inlined scripts, we put the content in `children`.\n        if (restProps.dangerouslySetInnerHTML) {\n          // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n          restProps.children = restProps.dangerouslySetInnerHTML\n            .__html as string\n          delete restProps.dangerouslySetInnerHTML\n        }\n\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                0,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      } else {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                src,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      }\n    } else if (strategy === 'afterInteractive') {\n      if (src) {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n      }\n    }\n  }\n\n  return null\n}\n\nObject.defineProperty(Script, '__nextScript', { value: true })\n\nexport default Script\n","module.exports = require('./dist/client/script')\n","'use client';\nimport { useEffect, useState } from 'react';\nimport Script from 'next/script';\n\nexport default function Editor({ onReady, onSelection, onPageChange, onUpdate }) {\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (window.GrapesJsStudioSDK) {\n        clearInterval(interval);\n\n        const container = document.getElementById('studio-editor');\n        if (container && container.innerHTML === '') {\n\n          window.GrapesJsStudioSDK.createStudioEditor({\n            root: '#studio-editor',\n            licenseKey: process.env.NEXT_PUBLIC_GRAPESJS_LICENSE_KEY || '',\n            theme: 'dark',\n            project: { type: 'web' },\n            assets: { storageType: 'self' },\n\n            onReady: (editor) => {\n              setIsLoaded(true);\n              window.studioEditor = editor;\n\n              // --- HELPER: Get Page Info ---\n              const sendPageInfo = () => {\n                const page = editor.Pages.getSelected();\n\n                // FIX: Check if 'page' exists before accessing .id\n                if (page && onPageChange) {\n                  onPageChange({\n                    id: page.id,\n                    name: page.get('name') || 'Untitled Page'\n                  });\n                }\n              };\n\n              // 1. Send initial page info\n              sendPageInfo();\n\n              // 2. Listen for Page Switches\n              editor.on('page:select', () => {\n                sendPageInfo();\n                // Also clear selection when switching pages\n                if (onSelection) onSelection(null);\n              });\n\n              // 3. Selection Listeners\n              editor.on('component:selected', (model) => {\n                if (!model) return;\n                const elData = {\n                  id: model.cid,\n                  tagName: model.get('tagName'),\n                  currentHTML: model.toHTML()\n                };\n                if (onSelection) onSelection(elData);\n              });\n\n              editor.on('component:deselected', () => {\n                if (onSelection) onSelection(null);\n              });\n\n              // 4. Change Listener for Auto-Save\n              editor.on('update', () => {\n                if (onUpdate) {\n                  // Pass a function to get data to avoid heavy serialization on every event if not needed\n                  // Or just pass the data object\n                  const projectData = editor.getProjectData();\n                  onUpdate(projectData);\n                }\n              });\n\n              if (onReady) onReady(editor);\n            }\n          });\n        }\n      }\n    }, 100);\n    return () => clearInterval(interval);\n  }, [onReady, onSelection, onPageChange]);\n\n  return (\n    <>\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/@grapesjs/studio-sdk/dist/style.css\" />\n      <Script src=\"https://unpkg.com/@grapesjs/studio-sdk/dist/index.umd.js\" strategy=\"lazyOnload\" />\n      <div className=\"editor-area\">\n        {!isLoaded && <div className=\"loading-overlay\">Loading Studio SDK...</div>}\n        <div id=\"studio-editor\" style={{ height: '100%' }}></div>\n      </div>\n    </>\n  );\n}\n","'use client';\nimport { useState, useRef, useEffect } from 'react';\n\n// Simple Icons\nconst ChatIcon = () => <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path></svg>;\nconst SettingsIcon = () => <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>;\n\nexport default function Sidebar({ messages, isThinking, onSend, selectedContext, currentPage, currentTheme, onThemeChange }) {\n    const [activeTab, setActiveTab] = useState('chat'); // 'chat' or 'settings'\n    const [input, setInput] = useState('');\n    const chatEndRef = useRef(null);\n\n    useEffect(() => {\n        chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, [messages, activeTab]);\n\n    const handleSubmit = () => {\n        if (!input.trim() || isThinking) return;\n        onSend(input);\n        setInput('');\n    };\n\n    const updateTheme = (key, value) => {\n        if (onThemeChange && currentTheme) {\n            onThemeChange({ ...currentTheme, [key]: value });\n        }\n    };\n\n    return (\n        <div className=\"sidebar\">\n            {/* HEADER */}\n            <div className=\"sidebar-header\">\n                <div className=\"page-title\">\n                    {currentPage?.name || 'Unknown Page'}\n                </div>\n                <div className=\"tab-buttons\">\n                    <button\n                        onClick={() => setActiveTab('chat')}\n                        className={`tab-btn ${activeTab === 'chat' ? 'active' : ''}`}\n                        title=\"AI Chat\"\n                    >\n                        <ChatIcon />\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('settings')}\n                        className={`tab-btn ${activeTab === 'settings' ? 'active' : ''}`}\n                        title=\"Page Settings\"\n                    >\n                        <SettingsIcon />\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"sidebar-content-wrapper\">\n\n                {/* === TAB 1: CHAT === */}\n                {activeTab === 'chat' && (\n                    <>\n                        <div className=\"chat-messages\">\n                            {(!messages || messages.length === 0) && (\n                                <div className=\"empty-state\">\n                                    Start chatting to edit <b>{currentPage?.name}</b>.\n                                </div>\n                            )}\n                            {messages && messages.map((msg, i) => (\n                                <div key={i} className={`msg ${msg.role}`}>\n                                    {msg.content}\n                                </div>\n                            ))}\n                            <div ref={chatEndRef} />\n                        </div>\n\n                        <div className=\"input-section\">\n                            {selectedContext && (\n                                <div className=\"context-badge\">\n                                    <span>EDITING: <b>&lt;{selectedContext.tagName.toUpperCase()}&gt;</b></span>\n                                </div>\n                            )}\n                            <textarea\n                                value={input}\n                                onChange={(e) => setInput(e.target.value)}\n                                onKeyDown={(e) => e.key === 'Enter' && !e.shiftKey && (e.preventDefault(), handleSubmit())}\n                                placeholder={`Ask to change ${currentPage?.name}...`}\n                                className=\"chat-input\"\n                            />\n                            <button onClick={handleSubmit} disabled={isThinking} className=\"send-btn\">\n                                {isThinking ? 'Generating...' : 'Send'}\n                            </button>\n                        </div>\n                    </>\n                )}\n\n                {/* === TAB 2: SETTINGS === */}\n                {activeTab === 'settings' && currentTheme && (\n                    <div className=\"settings-panel\">\n                        <h3 className=\"settings-title\">Page Theme</h3>\n                        <p className=\"settings-subtitle\">Settings for <b>{currentPage?.name}</b></p>\n\n                        <div className=\"setting-group\">\n                            <label>Primary Color</label>\n                            <div className=\"color-picker-wrapper\">\n                                <input type=\"color\"\n                                    value={currentTheme.primaryColor || '#000000'}\n                                    onChange={(e) => updateTheme('primaryColor', e.target.value)}\n                                    className=\"color-swatch\"\n                                />\n                                <input type=\"text\"\n                                    value={currentTheme.primaryColor || ''}\n                                    onChange={(e) => updateTheme('primaryColor', e.target.value)}\n                                    className=\"text-input\"\n                                    placeholder=\"#000000\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"setting-group\">\n                            <label>Secondary Color</label>\n                            <div className=\"color-picker-wrapper\">\n                                <input type=\"color\"\n                                    value={currentTheme.secondaryColor || '#ffffff'}\n                                    onChange={(e) => updateTheme('secondaryColor', e.target.value)}\n                                    className=\"color-swatch\"\n                                />\n                                <input type=\"text\"\n                                    value={currentTheme.secondaryColor || ''}\n                                    onChange={(e) => updateTheme('secondaryColor', e.target.value)}\n                                    className=\"text-input\"\n                                    placeholder=\"#ffffff\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"setting-group\">\n                            <label>Font Family</label>\n                            <select\n                                value={currentTheme.fontFamily || 'Arial'}\n                                onChange={(e) => updateTheme('fontFamily', e.target.value)}\n                                className=\"dropdown-input\"\n                            >\n                                <option value=\"Arial, sans-serif\">Arial</option>\n                                <option value=\"'Times New Roman', serif\">Times New Roman</option>\n                                <option value=\"'Courier New', monospace\">Courier New</option>\n                                <option value=\"Georgia, serif\">Georgia</option>\n                                <option value=\"Verdana, sans-serif\">Verdana</option>\n                            </select>\n                        </div>\n\n                        <div className=\"setting-group\">\n                            <label>Border Radius</label>\n                            <input type=\"text\"\n                                value={currentTheme.borderRadius || '4px'}\n                                onChange={(e) => updateTheme('borderRadius', e.target.value)}\n                                className=\"text-input\"\n                                placeholder=\"e.g. 8px\"\n                            />\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","'use client';\nimport { useRef, useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Sidebar from '@/components/Sidebar';\nimport Editor from '@/components/Editor';\nimport { useAI } from '@/hooks/useAI';\nimport { supabaseService } from '@/services/supabaseService';\nimport { createClient } from '@/utils/supabase/client';\n\nexport default function Home() {\n    const editorRef = useRef(null);\n    const router = useRouter();\n    const [isLoading, setIsLoading] = useState(true);\n\n    // 1. Current Transient State\n    const [selectedElement, setSelectedElement] = useState(null);\n    const [currentPage, setCurrentPage] = useState(null); // { name, id }\n\n    // 2. THE STORE (Dictionary of Pages)\n    // We keep this to switch between pages quickly, but we sync to DB.\n    const [pagesStore, setPagesStore] = useState({});\n\n    const { isThinking, generateResponse } = useAI();\n    const supabase = createClient();\n\n    // --- EFFECT: Check Auth & Load Data ---\n    useEffect(() => {\n        const init = async () => {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) {\n                router.push('/login');\n                return;\n            }\n\n            const pages = await supabaseService.getUserPages();\n            if (pages && pages.length > 0) {\n                // Load fetched pages into store\n                const newStore = {};\n                pages.forEach(p => {\n                    newStore[p.id] = {\n                        messages: p.messages || [],\n                        theme: p.theme || { primaryColor: '#2563eb', secondaryColor: '#ffffff', fontFamily: 'Arial', borderRadius: '4px' },\n                        content: p.content,\n                        name: p.name\n                    };\n                });\n                setPagesStore(newStore);\n                setCurrentPage({ name: pages[0].name, id: pages[0].id });\n            } else {\n                // Create default page? OR let user create.\n                // For now, create a default 'Home' in store (unsaved until edit?)\n                // Or create it in DB immediately.\n                const defaultId = 'page-' + Math.random().toString(36).substr(2, 9);\n                const defaultPage = {\n                    messages: [{ role: 'assistant', content: 'Hello! I created a new project for you.' }],\n                    theme: { primaryColor: '#2563eb', secondaryColor: '#ffffff', fontFamily: 'Arial', borderRadius: '4px' },\n                    content: {},\n                    name: 'Home'\n                };\n                setPagesStore({ [defaultId]: defaultPage });\n                setCurrentPage({ name: 'Home', id: defaultId });\n                // optionally save immediately so it persists\n                supabaseService.savePage(defaultId, defaultPage);\n            }\n            setIsLoading(false);\n        };\n        init();\n    }, [router]);\n\n    // --- SAVE LOGIC (Debounced) ---\n    // We use a simple timeout for debounce\n    const saveTimeoutRef = useRef(null);\n    const savePageData = useCallback((pageId, data) => {\n        if (saveTimeoutRef.current) clearTimeout(saveTimeoutRef.current);\n        saveTimeoutRef.current = setTimeout(async () => {\n            console.log('Saving page...', pageId);\n            await supabaseService.savePage(pageId, data);\n        }, 1000); // 1s debounce\n    }, []);\n\n    // --- HELPER: Get Current Page Data ---\n    const getCurrentPageData = () => {\n        if (!currentPage || !pagesStore[currentPage.id]) return {\n            messages: [],\n            theme: { primaryColor: '#000000', secondaryColor: '#ffffff' }\n        };\n        return pagesStore[currentPage.id];\n    };\n\n    // --- 3. Handle Page Switch ---\n    const handlePageChange = (pageInfo) => {\n        if (!currentPage || pageInfo.id === currentPage.id) return;\n\n        setCurrentPage(pageInfo);\n        setSelectedElement(null);\n\n        // Load content into editor\n        const targetPage = pagesStore[pageInfo.id];\n        if (targetPage && editorRef.current && targetPage.content) {\n            // Need to ensure loadProjectData exists on the editor instance\n            // Assuming grapejs studio editor supports it\n            if (editorRef.current.loadProjectData) {\n                editorRef.current.loadProjectData(targetPage.content);\n            }\n        }\n    };\n\n    // --- 4. Handle Theme Updates ---\n    const handleThemeChange = (newTheme) => {\n        if (!currentPage) return;\n        const pageId = currentPage.id;\n        setPagesStore(prev => {\n            const newList = { ...prev };\n            newList[pageId] = { ...newList[pageId], theme: newTheme };\n            savePageData(pageId, newList[pageId]); // Auto-save\n            return newList;\n        });\n    };\n\n    // --- 5. Handle AI Logic ---\n    const handleSendMessage = async (text) => {\n        if (!currentPage) return;\n        const pageId = currentPage.id;\n        const currentData = getCurrentPageData();\n        const currentHistory = currentData.messages || [];\n        const currentTheme = currentData.theme;\n\n        const userMsg = { role: 'user', content: text };\n        const placeholderBotMsg = { role: 'assistant', content: '' };\n\n        // Optimistic Update\n        setPagesStore(prev => {\n            const newList = { ...prev };\n            newList[pageId] = {\n                ...newList[pageId],\n                messages: [...currentHistory, userMsg, placeholderBotMsg]\n            };\n            return newList;\n        });\n\n        // Update the last message in chat as AI generates/finishes\n        const onStreamUpdate = (streamedText) => {\n            setPagesStore(prev => {\n                const pageData = prev[pageId];\n                const msgs = [...pageData.messages];\n                msgs[msgs.length - 1] = { role: 'assistant', content: streamedText };\n                const updatedPage = { ...pageData, messages: msgs };\n                return { ...prev, [pageId]: updatedPage };\n            });\n        };\n\n        // Call AI\n        const historyToSend = [...currentHistory.slice(-2), userMsg];\n        await generateResponse(\n            editorRef.current,\n            text,\n            historyToSend,\n            selectedElement,\n            onStreamUpdate,\n            null,\n            currentTheme\n        );\n\n        // Final Save after AI done\n        setPagesStore(prev => {\n            savePageData(pageId, prev[pageId]);\n            return prev;\n        });\n    };\n\n    // --- 6. Handle Editor Update ---\n    const handleEditorUpdate = (projectData) => {\n        if (!currentPage) return;\n        const pageId = currentPage.id;\n        setPagesStore(prev => {\n            const prevPage = prev[pageId];\n            if (!prevPage) return prev;\n\n            const updatedPage = { ...prevPage, content: projectData };\n\n            // Trigger save\n            savePageData(pageId, updatedPage);\n\n            return { ...prev, [pageId]: updatedPage };\n        });\n    };\n\n    if (isLoading) return <div className=\"flex items-center justify-center h-screen bg-black text-white\">Loading...</div>;\n\n    return (\n        <>\n            <style jsx global>{`\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n          background: #000;\n          color: #fff;\n          overflow: hidden;\n        }\n        .main-layout { display: flex; height: 100vh; width: 100vw; overflow: hidden; }\n\n        /* === SIDEBAR CSS === */\n        .sidebar {\n          position: relative; width: 400px; background: #1a1a1a;\n          border-right: 1px solid #333; display: flex; flex-direction: column;\n        }\n        .sidebar-header {\n            display: flex; justify-content: space-between; align-items: center;\n            padding: 15px; background-color: #252525; border-bottom: 1px solid #333;\n        }\n        .page-title { font-weight: bold; font-size: 14px; color: #fff; }\n        \n        .tab-buttons { display: flex; gap: 5px; background: #111; padding: 4px; border-radius: 6px; }\n        .tab-btn {\n            background: transparent; border: none; color: #666; padding: 6px;\n            cursor: pointer; border-radius: 4px; display: flex; align-items: center;\n        }\n        .tab-btn:hover { background: #333; }\n        .tab-btn.active { background: #2563eb; color: white; }\n\n        .sidebar-content-wrapper { flex: 1; overflow: hidden; display: flex; flex-direction: column; }\n        \n        /* Settings Panel */\n        .settings-panel { padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }\n        .settings-title { font-size: 12px; font-weight: bold; color: #888; text-transform: uppercase; }\n        .settings-subtitle { font-size: 11px; color: #666; margin-bottom: 10px; }\n        \n        .setting-group { display: flex; flex-direction: column; gap: 6px; }\n        .setting-group label { font-size: 12px; color: #ccc; }\n        \n        .color-picker-wrapper { display: flex; gap: 10px; }\n        .color-swatch { width: 30px; height: 30px; border: none; background: none; cursor: pointer; }\n        \n        .text-input, .dropdown-input {\n            background: #333; border: 1px solid #444; color: white;\n            padding: 8px; border-radius: 4px; font-size: 12px; width: 100%;\n        }\n\n        /* Chat Styles */\n        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; }\n        .empty-state { text-align: center; color: #666; font-size: 13px; margin-top: 40px; }\n        .msg { padding: 10px 14px; border-radius: 8px; line-height: 1.5; font-size: 14px; max-width: 90%; }\n        .msg.user { background: #2563eb; align-self: flex-end; }\n        .msg.assistant { background: #333; align-self: flex-start; }\n        \n        .input-section { padding: 15px; border-top: 1px solid #333; display: flex; flex-direction: column; gap: 10px; }\n        .context-badge { background: #7b1fa2; color: white; padding: 6px 10px; border-radius: 4px; font-size: 11px; }\n        .chat-input { background: #2a2a2a; border: 1px solid #444; color: white; padding: 10px; border-radius: 6px; min-height: 60px; resize: vertical; }\n        .send-btn { background: #2563eb; color: white; border: none; padding: 10px; border-radius: 6px; font-weight: bold; cursor: pointer; }\n        .send-btn:disabled { background: #444; }\n        \n        /* Editor */\n        .editor-area { flex: 1; background: #000; position: relative; }\n        .loading-overlay { position: absolute; inset: 0; background: #000; color: #666; display: flex; align-items: center; justify-content: center; }\n        #studio-editor { width: 100%; height: 100%; }\n      `}</style>\n\n            <div className=\"main-layout\">\n                <Sidebar\n                    messages={getCurrentPageData().messages}\n                    currentTheme={getCurrentPageData().theme}\n                    onThemeChange={handleThemeChange}\n                    currentPage={currentPage}\n                    selectedContext={selectedElement}\n                    onClearContext={() => setSelectedElement(null)}\n                    isThinking={isThinking}\n                    onSend={handleSendMessage}\n                />\n                <Editor\n                    onReady={(editor) => {\n                        editorRef.current = editor;\n                        // On initial ready, load content if we have it\n                        const pageData = getCurrentPageData();\n                        if (pageData && pageData.content) {\n                            // Try to load project data if supported\n                            if (editor.loadProjectData) {\n                                editor.loadProjectData(pageData.content);\n                            }\n                        }\n                    }}\n                    onSelection={setSelectedElement}\n                    onPageChange={handlePageChange}\n                    onUpdate={handleEditorUpdate}\n                />\n            </div>\n        </>\n    );\n}\n","export const AI_TOOLS = [\n  {\n    type: \"function\",\n    function: {\n      name: \"style_element\",\n      description: \"Apply CSS styles to the currently selected element. Use this for visual changes like 'make it red', 'add rounded corners', 'modernize', 'fix spacing'.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          css: {\n            type: \"object\",\n            description: \"A JSON object of CSS properties (e.g., {'border-radius': '10px', 'background-color': '#000'})\",\n            additionalProperties: { type: \"string\" }\n          },\n          recursive: {\n            type: \"boolean\",\n            description: \"If true, applies the styles to the selected element AND ALL its descendants. Use this when the user says 'make EVERYTHING inside...' or 'change all fonts'.\"\n          }\n        },\n        required: [\"css\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"update_inner_content\",\n      description: \"Replace the text or inner HTML structure of the selected element. Use this to change text, add icons inside a button, or change the layout *inside* a container. NEVER use this to wrap the selected element itself.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          html: {\n            type: \"string\",\n            description: \"The new inner HTML string.\"\n          }\n        },\n        required: [\"html\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"append_component\",\n      description: \"Insert a NEW component (like a button, image, or text) *inside* the selected element at the very end of its children. IMPORTANT: Include 'data-gjs-name=\\\"My Component Name\\\"' in the HTML to give it a clear name in the Layer Manager.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          component: {\n            type: \"string\",\n            description: \"HTML string of the new component to add. Example: '<div data-gjs-name=\\\"Hero Section\\\">...</div>'\"\n          }\n        },\n        required: [\"component\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"generate_whole_page\",\n      description: \"Replaces the ENTIRE page content with new HTML. Use this ONLY when the user asks to 'generate a landing page', 'create a website', or completely clear and rebuild the page. IMPORTANT: Use 'data-gjs-name' on main sections.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          html: {\n            type: \"string\",\n            description: \"The complete HTML structure. Main sections should have naming like <section data-gjs-name=\\\"Testimonials\\\">...\"\n          }\n        },\n        required: [\"html\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"delete_component\",\n      description: \"Remove the currently selected component from the page.\",\n      parameters: {\n        type: \"object\",\n        properties: {},\n        required: []\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"add_class\",\n      description: \"Add a CSS class to the selected component. Useful for applying utility classes or pre-defined styles.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          className: {\n            type: \"string\",\n            description: \"The name of the class to add.\"\n          }\n        },\n        required: [\"className\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"insert_sibling_before\",\n      description: \"Insert a NEW component BEFORE the currently selected element (as a sibling). Use 'data-gjs-name' for semantic naming.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          component: {\n            type: \"string\",\n            description: \"HTML string of the new component. Example: '<div data-gjs-name=\\\"Feature\\\">...</div>'\"\n          }\n        },\n        required: [\"component\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"insert_sibling_after\",\n      description: \"Insert a NEW component AFTER the currently selected element (as a sibling). Use 'data-gjs-name' for semantic naming.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          component: {\n            type: \"string\",\n            description: \"HTML string of the new component. Example: '<div data-gjs-name=\\\"Contact Form\\\">...</div>'\"\n          }\n        },\n        required: [\"component\"]\n      }\n    }\n  },\n  {\n    type: \"function\",\n    function: {\n      name: \"search_image\",\n      description: \"Search for a real image from Unsplash AND apply it to the selected element. This tool searches AND applies in one step - no need for a follow-up tool call.\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          query: {\n            type: \"string\",\n            description: \"Search keywords describing the image (e.g., 'sunset beach', 'modern office', 'happy team')\"\n          },\n          apply_as: {\n            type: \"string\",\n            enum: [\"background\", \"img_append\", \"img_replace\"],\n            description: \"How to apply the image: 'background' = set as CSS background-image on selected element, 'img_append' = append an <img> tag inside selected element, 'img_replace' = replace selected element's content with an <img> tag\"\n          },\n          color: {\n            type: \"string\",\n            enum: [\"black_and_white\", \"black\", \"white\", \"yellow\", \"orange\", \"red\", \"purple\", \"magenta\", \"green\", \"teal\", \"blue\"],\n            description: \"Optional: Filter images by dominant color\"\n          },\n          orientation: {\n            type: \"string\",\n            enum: [\"landscape\", \"portrait\", \"squarish\"],\n            description: \"Optional: Filter images by orientation. Use 'landscape' for wide/banner images, 'portrait' for tall images, 'squarish' for roughly square images.\"\n          }\n        },\n        required: [\"query\", \"apply_as\"]\n      }\n    }\n  }\n];\n","\nimport { createClient } from '@/utils/supabase/client'\n\nconst supabase = createClient()\n\nexport const supabaseService = {\n    async savePage(pageId, pageData) {\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) {\n            console.warn(\"Save attempted with no user logged in\")\n            return null\n        }\n\n        const { error } = await supabase\n            .from('pages')\n            .upsert({\n                id: pageId,\n                user_id: user.id,\n                name: pageData.name || 'Untitled',\n                content: pageData.content || {}, // Editor HTML/CSS components\n                theme: pageData.theme || {},\n                messages: pageData.messages || [],\n                updated_at: new Date().toISOString()\n            })\n            .select()\n            .single()\n\n        if (error) {\n            console.error('Error saving page:', error)\n            throw error\n        }\n        return true\n    },\n\n    async loadPage(pageId) {\n        const { data, error } = await supabase\n            .from('pages')\n            .select('*')\n            .eq('id', pageId)\n            .single()\n\n        if (error) {\n            if (error.code === 'PGRST116') return null // Not found\n            console.error('Error loading page:', error)\n            return null\n        }\n        return data\n    },\n\n    async getUserPages() {\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) return []\n\n        const { data, error } = await supabase\n            .from('pages')\n            .select('*')\n            .eq('user_id', user.id)\n            .order('updated_at', { ascending: false })\n\n        if (error) {\n            console.error('Error getting pages:', error)\n            return []\n        }\n        return data\n    }\n}\n","const {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!freeze) {\n  freeze = function <T>(x: T): T {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function <T>(x: T): T {\n    return x;\n  };\n}\n\nif (!apply) {\n  apply = function <T>(\n    func: (thisArg: any, ...args: any[]) => T,\n    thisArg: any,\n    ...args: any[]\n  ): T {\n    return func.apply(thisArg, args);\n  };\n}\n\nif (!construct) {\n  construct = function <T>(Func: new (...args: any[]) => T, ...args: any[]): T {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\nconst arraySplice = unapply(Array.prototype.splice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply<T>(\n  func: (thisArg: any, ...args: any[]) => T\n): (thisArg: any, ...args: any[]) => T {\n  return (thisArg: any, ...args: any[]): T => {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n\n    return apply(func, thisArg, args);\n  };\n}\n\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct<T>(\n  Func: new (...args: any[]) => T\n): (...args: any[]) => T {\n  return (...args: any[]): T => construct(Func, args);\n}\n\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(\n  set: Record<string, any>,\n  array: readonly any[],\n  transformCaseFunc: ReturnType<typeof unapply<string>> = stringToLowerCase\n): Record<string, any> {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          (array as any[])[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray<T>(array: T[]): Array<T | null> {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n\n  return array;\n}\n\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone<T extends Record<string, any>>(object: T): T {\n  const newObject = create(null);\n\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (\n        value &&\n        typeof value === 'object' &&\n        value.constructor === Object\n      ) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n\n  return newObject;\n}\n\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter<T extends Record<string, any>>(\n  object: T,\n  prop: string\n): ReturnType<typeof unapply<any>> | (() => null) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(): null {\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayLastIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  arraySplice,\n  // Object\n  entries,\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  clone,\n  create,\n  objectHasOwnProperty,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n  addToSet,\n  // Reflect\n  unapply,\n  unconstruct,\n};\n","import { useState } from 'react';\nimport DOMPurify from 'dompurify';\nimport { AI_TOOLS } from '../utils/aiTools';\n\nexport function useAI() {\n  const [isThinking, setIsThinking] = useState(false);\n\n  // --- HELPER: recursive DOM tree for context ---\n  const getSimplifiedDomTree = (component, depth = 0) => {\n    if (!component || depth > 3) return \"\"; // Limit depth to avoid token overflow\n\n    const tagName = component.get('tagName') || 'div';\n    const classes = component.getClasses().join(' ');\n    const id = component.getId();\n    const type = component.get('type') || '';\n\n    let info = `<${tagName}`;\n    if (id) info += ` id=\"${id}\"`;\n    if (classes) info += ` class=\"${classes}\"`;\n    if (type && type !== 'default') info += ` type=\"${type}\"`;\n    info += `>`;\n\n    // Don't recurse for text nodes, just show content preview\n    if (component.is('text')) {\n      const text = component.get('content') || \"\";\n      info += text.substring(0, 50) + (text.length > 50 ? \"...\" : \"\");\n    } else {\n      const children = component.get('components');\n      if (children && children.length > 0) {\n        children.forEach(child => {\n          info += getSimplifiedDomTree(child, depth + 1);\n        });\n      }\n    }\n\n    info += `</${tagName}>`;\n    return info;\n  };\n\n  const getPageContext = (editor) => {\n    if (!editor) return \"\";\n    const wrapper = editor.getWrapper();\n    return getSimplifiedDomTree(wrapper);\n  }\n\n  // --- HELPER: Execute Tool ---\n  const executeTool = async (toolName, args, selectedComponent, editor) => {\n    console.log(` [DEBUG] Executing Tool: ${toolName}`, args);\n\n    // Safety check for tools that require a selection\n    if (!selectedComponent && toolName !== 'generate_whole_page') {\n      return \"Error: No component selected for this operation.\";\n    }\n\n    switch (toolName) {\n      case 'style_element':\n        if (args.recursive) {\n          // Apply to component and all descendants\n          selectedComponent.addStyle(args.css);\n          const descendants = selectedComponent.find('*');\n          descendants.forEach(child => child.addStyle(args.css));\n          return \"Styles updated for element and all descendants.\";\n        } else {\n          selectedComponent.addStyle(args.css);\n          return \"Styles updated.\";\n        }\n\n      case 'update_inner_content':\n        const cleanContent = DOMPurify.sanitize(args.html, { FORCE_BODY: true, ADD_ATTR: ['style', 'class'] });\n        selectedComponent.components(cleanContent);\n        return \"Content updated.\";\n\n      case 'append_component':\n        const cleanChild = DOMPurify.sanitize(args.component, { FORCE_BODY: true, ADD_ATTR: ['style', 'class'] });\n        selectedComponent.append(cleanChild);\n        return \"Component appended.\";\n\n      case 'generate_whole_page':\n        if (!editor) return \"Error: Editor not found.\";\n        const cleanPage = DOMPurify.sanitize(args.html, { FORCE_BODY: true, ADD_ATTR: ['style', 'class'] });\n        editor.setComponents(cleanPage); // Replaces everything in the wrapper\n        return \"Page generated successfully.\";\n\n      case 'delete_component':\n        if (selectedComponent === editor.getWrapper()) return \"Error: Cannot delete the page wrapper.\";\n        selectedComponent.remove();\n        return \"Component deleted.\";\n\n      case 'add_class':\n        selectedComponent.addClass(args.className);\n        return `Class '${args.className}' added.`;\n\n      case 'insert_sibling_before': {\n        const parent = selectedComponent.parent();\n        if (!parent) return \"Error: Cannot insert before root element.\";\n        const index = parent.components().indexOf(selectedComponent);\n        const cleanSibling = DOMPurify.sanitize(args.component, { FORCE_BODY: true, ADD_ATTR: ['style', 'class'] });\n        parent.append(cleanSibling, { at: index });\n        return \"Component inserted before.\";\n      }\n\n      case 'insert_sibling_after': {\n        const parent = selectedComponent.parent();\n        if (!parent) return \"Error: Cannot insert after root element.\";\n        const index = parent.components().indexOf(selectedComponent);\n        const cleanSibling = DOMPurify.sanitize(args.component, { FORCE_BODY: true, ADD_ATTR: ['style', 'class'] });\n        parent.append(cleanSibling, { at: index + 1 });\n        return \"Component inserted after.\";\n      }\n\n      case 'search_image': {\n        console.log(' [DEBUG] Searching for image:', args);\n        try {\n          const response = await fetch('/api/unsplash/search', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              query: args.query,\n              color: args.color,\n              orientation: args.orientation,\n              random: true\n            })\n          });\n\n          if (!response.ok) {\n            const errText = await response.text();\n            console.error(' [DEBUG] Unsplash API error:', errText);\n            return `Error searching image: ${errText}. Using placeholder instead.`;\n          }\n\n          const data = await response.json();\n\n          if (!data.image) {\n            console.log(' [DEBUG] No images found for query:', args.query);\n            return `No images found for \"${args.query}\". Try different keywords.`;\n          }\n\n          const img = data.image;\n          console.log(' [DEBUG] Found image:', img.url);\n\n          // Apply the image based on apply_as parameter\n          const applyAs = args.apply_as || 'img_append';\n\n          switch (applyAs) {\n            case 'background':\n              // Set as CSS background-image\n              selectedComponent.addStyle({\n                'background-image': `url(\"${img.url}\")`,\n                'background-size': 'cover',\n                'background-position': 'center',\n                'background-repeat': 'no-repeat'\n              });\n              console.log(' [DEBUG] Applied as background image');\n              return `Background image set. Photo by ${img.photographer}.`;\n\n            case 'img_replace':\n              // Replace content with img tag\n              const replaceHtml = `<img src=\"${img.url}\" alt=\"${img.alt}\" style=\"max-width: 100%; height: auto; border-radius: 8px;\" />`;\n              selectedComponent.components(replaceHtml);\n              console.log(' [DEBUG] Replaced content with image');\n              return `Image replaced. Photo by ${img.photographer}.`;\n\n            case 'img_append':\n            default:\n              // Append img tag as child\n              const appendHtml = `<img src=\"${img.url}\" alt=\"${img.alt}\" style=\"max-width: 100%; height: auto; border-radius: 8px;\" />`;\n              selectedComponent.append(appendHtml);\n              console.log(' [DEBUG] Appended image');\n              return `Image added. Photo by ${img.photographer}.`;\n          }\n\n        } catch (error) {\n          console.error(' [DEBUG] Image search failed:', error);\n          return `Error: ${error.message}. Consider using a placeholder URL.`;\n        }\n      }\n\n      default:\n        return \"Unknown command.\";\n    }\n  };\n\n  // --- MAIN FUNCTION ---\n  const generateResponse = async (editor, userText, history, selectedContext, onStreamUpdate, onComplete, theme) => {\n    console.log(\" [DEBUG] generateResponse STARTED\");\n\n    if (!userText.trim() || !editor) {\n      if (onStreamUpdate) onStreamUpdate(\"Error: Editor not ready.\");\n      return;\n    }\n\n    setIsThinking(true);\n\n    // 1. Determine Target: Selection OR Wrapper (Body)\n    // If selectedContext is passed (from React state), use that to find the component\n    // But better to ask the editor directly for the *live* selected model\n    const selectedModel = editor.getSelected() || editor.getWrapper();\n    const isWrapper = selectedModel === editor.getWrapper();\n\n    let systemPrompt = `\n      ROLE: You are an AI assistant controlling a GrapesJS visual web editor. You execute edits by calling tools.\n\n      =============================================\n      *** CURRENT TARGET (THIS IS WHAT YOU EDIT) ***\n      =============================================\n      Element Type: ${isWrapper ? \"ENTIRE PAGE (body wrapper)\" : `<${selectedModel.get('tagName')}>`}\n      ${!isWrapper ? `Element ID: ${selectedModel.getId() || 'none'}` : \"\"}\n      ${!isWrapper ? `Element Classes: ${selectedModel.getClasses().join(' ') || 'none'}` : \"\"}\n      ${!isWrapper ? `\\nElement HTML:\\n\\`\\`\\`html\\n${selectedModel.toHTML()}\\n\\`\\`\\`\\n` : \"\"}\n      =============================================\n\n      ${theme ? `\n      =============================================\n      *** PAGE THEME (USE THESE COLORS/STYLES) ***\n      =============================================\n      Primary Color: ${theme.primaryColor || '#2563eb'}\n      Secondary Color: ${theme.secondaryColor || '#ffffff'}\n      Font Family: ${theme.fontFamily || 'Arial'}\n      Border Radius: ${theme.borderRadius || '8px'}\n      =============================================\n      When adding new elements (buttons, sections, etc.), USE THESE THEME VALUES for consistency!\n      ` : \"\"}\n\n      PAGE STRUCTURE (for reference):\n      \\`\\`\\`html\n      ${getPageContext(editor)}\n      \\`\\`\\`\n\n      USER REQUEST: \"${userText}\"\n\n      *** IMPORTANT: Focus ONLY on the CURRENT TARGET above. Ignore any previous messages about different elements. ***\n\n      ---\n      TOOL SELECTION RULES (FOLLOW STRICTLY):\n\n      1.  **To ADD a new element** (image, button, section, etc.) -> Use \\`append_component\\`.\n          - This inserts a NEW child element at the END of the selected element.\n          - Provide the full HTML for the new component (e.g., \\`<img src=\"...\" />\\`).\n\n      2.  **To CHANGE existing text or inner structure** -> Use \\`update_inner_content\\`.\n          - This REPLACES the innerHTML of the selected element.\n          - Use ONLY for text changes or restructuring *inside* the element.\n\n      3.  **To STYLE the selected element** (colors, fonts, spacing, borders) -> Use \\`style_element\\`.\n          - Provide a JSON object of CSS properties.\n\n      4.  **To DELETE the selected element** -> Use \\`delete_component\\`.\n\n      5.  **To GENERATE a WHOLE NEW PAGE** (only if user asks for \"landing page\", \"website\") -> Use \\`generate_whole_page\\`.\n\n      ---\n      EXAMPLES:\n      - User: \"add an image of a sunset\" -> Call \\`search_image\\` with \\`{ \"query\": \"sunset\", \"orientation\": \"landscape\", \"apply_as\": \"img_append\" }\\`.\n      - User: \"change this background to a beach\" -> Call \\`search_image\\` with \\`{ \"query\": \"beach\", \"apply_as\": \"background\" }\\`.\n      - User: \"replace this image with a cat\" -> Call \\`search_image\\` with \\`{ \"query\": \"cat\", \"apply_as\": \"img_replace\" }\\`.\n      - User: \"make this button red\" -> Call \\`style_element\\` with \\`{ \"css\": {\"background-color\": \"red\"} }\\`\n      - User: \"change the title to Welcome\" -> Call \\`update_inner_content\\` with \\`{ \"html\": \"Welcome\" }\\`\n      - User: \"delete this section\" -> Call \\`delete_component\\`.\n      - User: \"add a header before this\" -> Call \\`insert_sibling_before\\` with \\`{ \"component\": \"<h1>Header</h1>\" }\\`.\n      - User: \"add a footer after this\" -> Call \\`insert_sibling_after\\` with \\`{ \"component\": \"<footer>Footer content</footer>\" }\\`.\n\n      CRITICAL RULES:\n      - You MUST call a tool. NEVER respond with text explanations.\n      - Call ONLY ONE tool per response.\n      - **FOR IMAGES**: Use \\`search_image\\` with the appropriate \\`apply_as\\` parameter ('background', 'img_append', or 'img_replace') to find AND apply the image in one step.\n      - **FOR STYLING CHILDREN**: If the user asks to \"make everything inside white\" or \"change all fonts\", use \\`style_element\\` with \\`recursive: true\\`.\n      - Use \\`insert_sibling_before\\`/\\`insert_sibling_after\\` when adding elements AS SIBLINGS (before/after), use \\`append_component\\` when adding elements AS CHILDREN (inside).\n      - When creating new elements, USE THE PAGE THEME colors (Primary Color for buttons/accents, Secondary Color for backgrounds, Font Family for text, Border Radius for corners).\n      - **ALWAYS provide a semantic name** for significant elements (sections, buttons, containers) using the \\`data-gjs-name\\` attribute. Example: \\`<div data-gjs-name=\"Hero Section\">...</div>\\`. This helps the user identify components in the layer manager.\n      - DO NOT explain what you are doing. Just call the tool.\n    `;\n\n    try {\n      const payload = {\n        model: process.env.NEXT_PUBLIC_AI_MODEL || 'google/gemini-2.0-flash-exp:free',\n        messages: [{ role: 'system', content: systemPrompt }, ...history],\n        tools: AI_TOOLS,\n        tool_choice: \"required\"\n      };\n\n      console.log(\" [Client] Sending Payload:\", JSON.stringify({\n        ...payload,\n        messages: [\n          ...payload.messages.slice(0, 1), // System prompt\n          { role: '...', content: `(${payload.messages.length - 1} more messages)` }\n        ]\n      }, null, 2));\n\n      const response = await fetch('/api/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n        const errText = await response.text();\n        console.error(`[Client] API Error ${response.status}: `, errText);\n        throw new Error(`API Error: ${response.statusText} - ${errText} `);\n      }\n\n      console.log(`[Client] Response Status: ${response.status} ${response.statusText} `);\n\n      const data = await response.json();\n      console.log(\" [Client] Response Data:\", JSON.stringify({\n        id: data.id,\n        model: data.model,\n        usage: data.usage,\n        choicesCount: data.choices?.length,\n        finishReason: data.choices?.[0]?.finish_reason,\n        hasToolCalls: !!data.choices?.[0]?.message?.tool_calls,\n        hasContent: !!data.choices?.[0]?.message?.content\n      }, null, 2));\n\n      const choice = data.choices[0];\n      const message = choice.message;\n\n      let finalUserMessage = \"\";\n\n      if (message.tool_calls && message.tool_calls.length > 0) {\n        console.log(`[Client] Processing ${message.tool_calls.length} tool call(s)`);\n        for (const toolCall of message.tool_calls) {\n          const fnName = toolCall.function.name;\n          let fnArgs = {};\n          try { fnArgs = JSON.parse(toolCall.function.arguments); } catch (e) {\n            console.error(\" [Client] Failed to parse tool arguments:\", toolCall.function.arguments);\n          }\n\n          // Pass 'editor' to executeTool for page-level ops\n          const result = await executeTool(fnName, fnArgs, selectedModel, editor);\n          console.log(`[Client] Tool '${fnName}' result: ${result} `);\n          finalUserMessage += result + \" \";\n        }\n      }\n      else if (message.content) {\n        console.log(\" [Client] LLM returned text content (no tool call)\");\n        finalUserMessage = message.content;\n      } else {\n        console.log(\" [Client] LLM returned empty response\");\n        finalUserMessage = \"Done.\";\n      }\n\n      if (onStreamUpdate) onStreamUpdate(finalUserMessage);\n      if (onComplete) onComplete(finalUserMessage);\n\n    } catch (error) {\n      console.error(\" [DEBUG] AI Error:\", error);\n      if (onStreamUpdate) onStreamUpdate(\"Sorry, something went wrong.\");\n    } finally {\n      setIsThinking(false);\n    }\n  };\n\n  return { isThinking, generateResponse };\n}\n","import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'search',\n  'section',\n  'select',\n  'shadow',\n  'slot',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n] as const);\n\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'enterkeyhint',\n  'exportparts',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'inputmode',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'part',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n] as const);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n] as const);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n] as const);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n  'mprescripts',\n] as const);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n] as const);\n\nexport const text = freeze(['#text'] as const);\n","import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'exportparts',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inert',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'nonce',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'part',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'popover',\n  'popovertarget',\n  'popovertargetaction',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'slot',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'wrap',\n  'xmlns',\n  'slot',\n] as const);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'amplitude',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'exponent',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'intercept',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'mask-type',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'slope',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'tablevalues',\n  'targetx',\n  'targety',\n  'transform',\n  'transform-origin',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n] as const);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n] as const);\n","import { seal } from './utils.js';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nexport const TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nexport const DOCTYPE_NAME = seal(/^html$/i);\nexport const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n","/* eslint-disable @typescript-eslint/indent */\n\nimport type {\n  TrustedHTML,\n  TrustedTypesWindow,\n} from 'trusted-types/lib/index.js';\nimport type { Config, UseProfilesConfig } from './config';\nimport * as TAGS from './tags.js';\nimport * as ATTRS from './attrs.js';\nimport * as EXPRESSIONS from './regexp.js';\nimport {\n  addToSet,\n  clone,\n  entries,\n  freeze,\n  arrayForEach,\n  arrayLastIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySplice,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n  create,\n  objectHasOwnProperty,\n} from './utils.js';\n\nexport type { Config } from './config';\n\ndeclare const VERSION: string;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5, // Deprecated\n  entityNode: 6, // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12, // Deprecated\n};\n\nconst getGlobal = function (): WindowLike {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function (\n  trustedTypes: TrustedTypePolicyFactory,\n  purifyHostElement: HTMLScriptElement\n) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nconst _createHooksMap = function (): HooksMap {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: [],\n  };\n};\n\nfunction createDOMPurify(window: WindowLike = getGlobal()): DOMPurify {\n  const DOMPurify: DOMPurify = (root: WindowLike) => createDOMPurify(root);\n\n  DOMPurify.version = VERSION;\n\n  DOMPurify.removed = [];\n\n  if (\n    !window ||\n    !window.document ||\n    window.document.nodeType !== NODE_TYPE.document ||\n    !window.Element\n  ) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  let { document } = window;\n\n  const originalDocument = document;\n  const currentScript: HTMLScriptElement =\n    originalDocument.currentScript as HTMLScriptElement;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || (window as any).MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let hooks = _createHooksMap();\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof entries === 'function' &&\n    typeof getParentNode === 'function' &&\n    implementation &&\n    implementation.createHTMLDocument !== undefined;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(\n    create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false,\n      },\n    })\n  );\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Config object to store ADD_TAGS/ADD_ATTR functions (when used as functions) */\n  const EXTRA_ELEMENT_HANDLING = Object.seal(\n    create(null, {\n      tagCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n    })\n  );\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (7.3.3)\n   *   - DOM Tree Accessors (3.1.5)\n   *   - Form Element Parent-Child Relations (4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n   *   - HTMLCollection (4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES: UseProfilesConfig | false = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'role',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet(\n    {},\n    [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE],\n    stringToString\n  );\n\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n    'title',\n    'style',\n    'font',\n    'a',\n    'script',\n  ]);\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE: null | DOMParserSupportedType = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc: null | Parameters<typeof addToSet>[2] = null;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG: Config | null = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  const isRegexOrFunction = function (\n    testValue: unknown\n  ): testValue is Function | RegExp {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg: Config = {}): void {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1\n        ? DEFAULT_PARSER_MEDIA_TYPE\n        : cfg.PARSER_MEDIA_TYPE;\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc =\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml'\n        ? stringToString\n        : stringToLowerCase;\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS')\n      ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc)\n      : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR')\n      ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc)\n      : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES')\n      ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString)\n      : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR')\n      ? addToSet(\n          clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n          cfg.ADD_URI_SAFE_ATTR,\n          transformCaseFunc\n        )\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS')\n      ? addToSet(\n          clone(DEFAULT_DATA_URI_TAGS),\n          cfg.ADD_DATA_URI_TAGS,\n          transformCaseFunc\n        )\n      : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS')\n      ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc)\n      : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS')\n      ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc)\n      : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR')\n      ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc)\n      : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES')\n      ? cfg.USE_PROFILES\n      : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || EXPRESSIONS.IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS =\n      cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS =\n      cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements ===\n        'boolean'\n    ) {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements =\n        cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, TAGS.text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (typeof cfg.ADD_TAGS === 'function') {\n        EXTRA_ELEMENT_HANDLING.tagCheck = cfg.ADD_TAGS;\n      } else {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (typeof cfg.ADD_ATTR === 'function') {\n        EXTRA_ELEMENT_HANDLING.attributeCheck = cfg.ADD_ATTR;\n      } else {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    if (cfg.ADD_FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.ADD_FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.'\n        );\n      }\n\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.'\n        );\n      }\n\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(\n          trustedTypes,\n          currentScript\n        );\n      }\n\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.svgDisallowed,\n  ]);\n  const ALL_MATHML_TAGS = addToSet({}, [\n    ...TAGS.mathMl,\n    ...TAGS.mathMlDisallowed,\n  ]);\n\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element: Element): boolean {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // For XHTML and XML documents that support custom namespaces\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      ALLOWED_NAMESPACES[element.namespaceURI]\n    ) {\n      return true;\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function (node: Node): void {\n    arrayPush(DOMPurify.removed, { element: node });\n\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function (name: string, element: Element): void {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element,\n      });\n    }\n\n    element.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty: string): Document {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      NAMESPACE === HTML_NAMESPACE\n    ) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty =\n        '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' +\n        dirty +\n        '</body></html>';\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT\n          ? emptyHTML\n          : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    const body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(\n        doc,\n        WHOLE_DOCUMENT ? 'html' : 'body'\n      )[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function (root: Node): NodeIterator {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT |\n        NodeFilter.SHOW_COMMENT |\n        NodeFilter.SHOW_TEXT |\n        NodeFilter.SHOW_PROCESSING_INSTRUCTION |\n        NodeFilter.SHOW_CDATA_SECTION,\n      null\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function (element: Element): boolean {\n    return (\n      element instanceof HTMLFormElement &&\n      (typeof element.nodeName !== 'string' ||\n        typeof element.textContent !== 'string' ||\n        typeof element.removeChild !== 'function' ||\n        !(element.attributes instanceof NamedNodeMap) ||\n        typeof element.removeAttribute !== 'function' ||\n        typeof element.setAttribute !== 'function' ||\n        typeof element.namespaceURI !== 'string' ||\n        typeof element.insertBefore !== 'function' ||\n        typeof element.hasChildNodes !== 'function')\n    );\n  };\n\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function (value: unknown): value is Node {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n\n  function _executeHooks<T extends HookFunction>(\n    hooks: HookFunction[],\n    currentNode: Parameters<T>[0],\n    data: Parameters<T>[1]\n  ): void {\n    arrayForEach(hooks, (hook: T) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode: any): boolean {\n    let content = null;\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.hasChildNodes() &&\n      !_isNode(currentNode.firstElementChild) &&\n      regExpTest(/<[/\\w!]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w!]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any kind of possibly harmful comments */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.nodeType === NODE_TYPE.comment &&\n      regExpTest(/<[/\\w]/g, currentNode.data)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (\n      !(\n        EXTRA_ELEMENT_HANDLING.tagCheck instanceof Function &&\n        EXTRA_ELEMENT_HANDLING.tagCheck(tagName)\n      ) &&\n      (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName])\n    ) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n          regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)\n        ) {\n          return false;\n        }\n\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)\n        ) {\n          return false;\n        }\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if (\n      (tagName === 'noscript' ||\n        tagName === 'noembed' ||\n        tagName === 'noframes') &&\n      regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr: RegExp) => {\n        content = stringReplace(content, expr, ' ');\n      });\n\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (\n    lcTag: string,\n    lcName: string,\n    value: string\n  ): boolean {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (\n      ALLOW_DATA_ATTR &&\n      !FORBID_ATTR[lcName] &&\n      regExpTest(DATA_ATTR, lcName)\n    ) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Check if ADD_ATTR function allows this attribute */\n    } else if (\n      EXTRA_ELEMENT_HANDLING.attributeCheck instanceof Function &&\n      EXTRA_ELEMENT_HANDLING.attributeCheck(lcName, lcTag)\n    ) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        (_isBasicCustomElement(lcTag) &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))) &&\n          ((CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName)) ||\n            (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName, lcTag)))) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        (lcName === 'is' &&\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))))\n      ) {\n        // If user has supplied a regexp or function in CUSTOM_ELEMENT_HANDLING.tagNameCheck, we need to also allow derived custom elements using the same tagName test.\n        // Additionally, we need to allow attributes passing the CUSTOM_ELEMENT_HANDLING.attributeNameCheck user has configured, as custom elements can define these at their own discretion.\n      } else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n    } else if (value) {\n      return false;\n    } else {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    }\n\n    return true;\n  };\n\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function (tagName: string): RegExpMatchArray {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode: Element): void {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined,\n    };\n    let l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const { name, namespaceURI, value: attrValue } = attr;\n      const lcName = transformCaseFunc(name);\n\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n\n      /* Work around a security issue with comments inside attributes */\n      if (\n        SAFE_FOR_XML &&\n        regExpTest(/((--!?|])>)|<\\/(style|title|textarea)/i, value)\n      ) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Make sure we cannot easily use animated hrefs, even if animations are allowed */\n      if (lcName === 'attributename' && stringMatch(value, 'href')) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr: RegExp) => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Handle attributes that require Trusted Types */\n      if (\n        trustedTypesPolicy &&\n        typeof trustedTypes === 'object' &&\n        typeof trustedTypes.getAttributeType === 'function'\n      ) {\n        if (namespaceURI) {\n          /* Namespaces are not yet supported, see https://bugs.chromium.org/p/chromium/issues/detail?id=1305293 */\n        } else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML': {\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n            }\n\n            case 'TrustedScriptURL': {\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n            }\n\n            default: {\n              break;\n            }\n          }\n        }\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment: DocumentFragment): void {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg = {}) {\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if ((dirty as Node).nodeName) {\n        const tagName = transformCaseFunc((dirty as Node).nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate(\n            'root node is forbidden and cannot be sanitized in-place'\n          );\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (\n        importedNode.nodeType === NODE_TYPE.element &&\n        importedNode.nodeName === 'BODY'\n      ) {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (\n      WHOLE_DOCUMENT &&\n      ALLOWED_TAGS['!doctype'] &&\n      body.ownerDocument &&\n      body.ownerDocument.doctype &&\n      body.ownerDocument.doctype.name &&\n      regExpTest(EXPRESSIONS.DOCTYPE_NAME, body.ownerDocument.doctype.name)\n    ) {\n      serializedHTML =\n        '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr: RegExp) => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  DOMPurify.setConfig = function (cfg = {}) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  DOMPurify.addHook = function (\n    entryPoint: keyof HooksMap,\n    hookFunction: HookFunction\n  ) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  DOMPurify.removeHook = function (\n    entryPoint: keyof HooksMap,\n    hookFunction: HookFunction\n  ) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n\n      return index === -1\n        ? undefined\n        : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n\n    return arrayPop(hooks[entryPoint]);\n  };\n\n  DOMPurify.removeHooks = function (entryPoint: keyof HooksMap) {\n    hooks[entryPoint] = [];\n  };\n\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n\nexport interface DOMPurify {\n  /**\n   * Creates a DOMPurify instance using the given window-like object. Defaults to `window`.\n   */\n  (root?: WindowLike): DOMPurify;\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  version: string;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  removed: Array<RemovedElement | RemovedAttribute>;\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  isSupported: boolean;\n\n  /**\n   * Set the configuration once.\n   *\n   * @param cfg configuration object\n   */\n  setConfig(cfg?: Config): void;\n\n  /**\n   * Removes the configuration.\n   */\n  clearConfig(): void;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized TrustedHTML.\n   */\n  sanitize(\n    dirty: string | Node,\n    cfg: Config & { RETURN_TRUSTED_TYPE: true }\n  ): TrustedHTML;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty DOM node\n   * @param cfg object\n   * @returns Sanitized DOM node.\n   */\n  sanitize(dirty: Node, cfg: Config & { IN_PLACE: true }): Node;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized DOM node.\n   */\n  sanitize(dirty: string | Node, cfg: Config & { RETURN_DOM: true }): Node;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized document fragment.\n   */\n  sanitize(\n    dirty: string | Node,\n    cfg: Config & { RETURN_DOM_FRAGMENT: true }\n  ): DocumentFragment;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized string.\n   */\n  sanitize(dirty: string | Node, cfg?: Config): string;\n\n  /**\n   * Checks if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   *\n   * @param tag Tag name of containing element.\n   * @param attr Attribute name.\n   * @param value Attribute value.\n   * @returns Returns true if `value` is valid. Otherwise, returns false.\n   */\n  isValidAttribute(tag: string, attr: string, value: string): boolean;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(entryPoint: BasicHookName, hookFunction: NodeHook): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(entryPoint: ElementHookName, hookFunction: ElementHook): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: DocumentFragmentHookName,\n    hookFunction: DocumentFragmentHook\n  ): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: 'uponSanitizeElement',\n    hookFunction: UponSanitizeElementHook\n  ): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: 'uponSanitizeAttribute',\n    hookFunction: UponSanitizeAttributeHook\n  ): void;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: BasicHookName,\n    hookFunction?: NodeHook\n  ): NodeHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: ElementHookName,\n    hookFunction?: ElementHook\n  ): ElementHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: DocumentFragmentHookName,\n    hookFunction?: DocumentFragmentHook\n  ): DocumentFragmentHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: 'uponSanitizeElement',\n    hookFunction?: UponSanitizeElementHook\n  ): UponSanitizeElementHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: 'uponSanitizeAttribute',\n    hookFunction?: UponSanitizeAttributeHook\n  ): UponSanitizeAttributeHook | undefined;\n\n  /**\n   * Removes all DOMPurify hooks at a given entryPoint\n   *\n   * @param entryPoint entry point for the hooks to remove\n   */\n  removeHooks(entryPoint: HookName): void;\n\n  /**\n   * Removes all DOMPurify hooks.\n   */\n  removeAllHooks(): void;\n}\n\n/**\n * An element removed by DOMPurify.\n */\nexport interface RemovedElement {\n  /**\n   * The element that was removed.\n   */\n  element: Node;\n}\n\n/**\n * An element removed by DOMPurify.\n */\nexport interface RemovedAttribute {\n  /**\n   * The attribute that was removed.\n   */\n  attribute: Attr | null;\n\n  /**\n   * The element that the attribute was removed.\n   */\n  from: Node;\n}\n\ntype BasicHookName =\n  | 'beforeSanitizeElements'\n  | 'afterSanitizeElements'\n  | 'uponSanitizeShadowNode';\ntype ElementHookName = 'beforeSanitizeAttributes' | 'afterSanitizeAttributes';\ntype DocumentFragmentHookName =\n  | 'beforeSanitizeShadowDOM'\n  | 'afterSanitizeShadowDOM';\ntype UponSanitizeElementHookName = 'uponSanitizeElement';\ntype UponSanitizeAttributeHookName = 'uponSanitizeAttribute';\n\ninterface HooksMap {\n  beforeSanitizeElements: NodeHook[];\n  afterSanitizeElements: NodeHook[];\n  beforeSanitizeShadowDOM: DocumentFragmentHook[];\n  uponSanitizeShadowNode: NodeHook[];\n  afterSanitizeShadowDOM: DocumentFragmentHook[];\n  beforeSanitizeAttributes: ElementHook[];\n  afterSanitizeAttributes: ElementHook[];\n  uponSanitizeElement: UponSanitizeElementHook[];\n  uponSanitizeAttribute: UponSanitizeAttributeHook[];\n}\n\ntype ArrayElement<T> = T extends Array<infer U> ? U : never;\n\ntype HookFunction = ArrayElement<HooksMap[keyof HooksMap]>;\n\nexport type HookName =\n  | BasicHookName\n  | ElementHookName\n  | DocumentFragmentHookName\n  | UponSanitizeElementHookName\n  | UponSanitizeAttributeHookName;\n\nexport type NodeHook = (\n  this: DOMPurify,\n  currentNode: Node,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type ElementHook = (\n  this: DOMPurify,\n  currentNode: Element,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type DocumentFragmentHook = (\n  this: DOMPurify,\n  currentNode: DocumentFragment,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type UponSanitizeElementHook = (\n  this: DOMPurify,\n  currentNode: Node,\n  hookEvent: UponSanitizeElementHookEvent,\n  config: Config\n) => void;\n\nexport type UponSanitizeAttributeHook = (\n  this: DOMPurify,\n  currentNode: Element,\n  hookEvent: UponSanitizeAttributeHookEvent,\n  config: Config\n) => void;\n\nexport interface UponSanitizeElementHookEvent {\n  tagName: string;\n  allowedTags: Record<string, boolean>;\n}\n\nexport interface UponSanitizeAttributeHookEvent {\n  attrName: string;\n  attrValue: string;\n  keepAttr: boolean;\n  allowedAttributes: Record<string, boolean>;\n  forceKeepAttr: boolean | undefined;\n}\n\n/**\n * A `Window`-like object containing the properties and types that DOMPurify requires.\n */\nexport type WindowLike = Pick<\n  typeof globalThis,\n  | 'DocumentFragment'\n  | 'HTMLTemplateElement'\n  | 'Node'\n  | 'Element'\n  | 'NodeFilter'\n  | 'NamedNodeMap'\n  | 'HTMLFormElement'\n  | 'DOMParser'\n> & {\n  document?: Document;\n  MozNamedAttrMap?: typeof window.NamedNodeMap;\n} & Pick<TrustedTypesWindow, 'trustedTypes'>;\n"],"names":["module","exports","require","vendored","HeadManagerContext","setAttributesFromProps","DOMAttributeNames","acceptCharset","className","htmlFor","httpEquiv","noModule","ignoreProps","isBooleanScriptAttribute","attr","includes","el","props","p","value","Object","entries","hasOwnProperty","undefined","toLowerCase","tagName","setAttribute","String","removeAttribute","cancelIdleCallback","requestIdleCallback","self","bind","window","cb","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","id","clearTimeout","handleClientScriptLoad","initScriptLoader","ScriptCache","Map","LoadCache","Set","insertStylesheets","stylesheets","ReactDOM","preinit","forEach","stylesheet","as","head","document","link","createElement","type","rel","href","appendChild","loadScript","src","onLoad","onReady","dangerouslySetInnerHTML","children","strategy","onError","cacheKey","has","add","get","then","afterLoad","loadPromise","Promise","resolve","reject","addEventListener","e","call","catch","innerHTML","__html","textContent","Array","isArray","join","set","body","loadLazyScript","readyState","addBeforeInteractiveToCache","scripts","querySelectorAll","script","getAttribute","scriptLoaderItems","Script","restProps","updateScripts","getIsSsr","appDir","nonce","useContext","hasOnReadyEffectCalled","useRef","useEffect","current","hasLoadScriptEffectCalled","concat","styleSrc","JSON","stringify","preload","integrity","crossOrigin","defineProperty","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","apply","construct","Reflect","x","func","thisArg","_len","arguments","length","args","_key","_len2","_key2","Func","unapply","prototype","arrayLastIndexOf","lastIndexOf","arrayPop","pop","arrayPush","push","arraySplice","splice","stringToLowerCase","stringToString","toString","match","stringReplace","replace","stringIndexOf","indexOf","stringTrim","trim","regExpTest","test","typeErrorCreate","unconstruct","TypeError","RegExp","lastIndex","_len3","_key3","_len4","_key4","addToSet","array","transformCaseFunc","l","element","lcElement","cleanArray","index","isPropertyExist","clone","object","newObject","property","objectHasOwnProperty","constructor","lookupGetter","prop","desc","fallbackValue","html","svg","svgDisallowed","mathMl","mathMlDisallowed","text","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","NODE_TYPE","attribute","cdataSection","entityReference","entityNode","progressingInstruction","comment","documentType","documentFragment","notation","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","createPolicy","suffix","ATTR_NAME","hasAttribute","policyName","createHTML","createScriptURL","scriptUrl","_","console","warn","_createHooksMap","afterSanitizeAttributes","afterSanitizeElements","afterSanitizeShadowDOM","beforeSanitizeAttributes","beforeSanitizeElements","beforeSanitizeShadowDOM","uponSanitizeAttribute","uponSanitizeElement","uponSanitizeShadowNode","createDOMPurify","root","DOMPurify","version","removed","nodeType","Element","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","cloneNode","ElementPrototype","remove","getParentNode","template","content","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","createHTMLDocument","TMPLIT_EXPR","EXPRESSIONS","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","ATTRS","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","EXTRA_ELEMENT_HANDLING","tagCheck","attributeCheck","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","Function","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","svgFilters","ADD_TAGS","ADD_ATTR","ADD_FORBID_CONTENTS","table","tbody","TRUSTED_TYPES_POLICY","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parent","namespaceURI","parentTagName","Boolean","_forceRemove","node","removeChild","_removeAttribute","name","getAttributeNode","from","_initDocument","dirty","doc","leadingWhitespace","matches","stringMatch","dirtyPayload","parseFromString","documentElement","createDocument","insertBefore","createTextNode","childNodes","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","nodeName","attributes","hasChildNodes","_isNode","_executeHooks","currentNode","data","arrayForEach","hook","_sanitizeElements","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","getChildNodes","childCount","i","childClone","__removalCount","getNextSibling","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","forceKeepAttr","initValue","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","tag","addHook","entryPoint","hookFunction","removeHook","removeHooks","removeAllHooks"],"mappings":"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,QAAS,CACzC,EACA,UAAW,CACT,KAAM,UACN,YAAa,6JACf,CACF,EACA,SAAU,CAAC,MAAM,AACnB,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,uBACN,YAAa,uNACb,WAAY,CACV,KAAM,SACN,WAAY,CACV,KAAM,CACJ,KAAM,SACN,YAAa,4BACf,CACF,EACA,SAAU,CAAC,OAAO,AACpB,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,mBACN,YAAa,2OACb,WAAY,CACV,KAAM,SACN,WAAY,CACV,UAAW,CACT,KAAM,SACN,YAAa,mGACf,CACF,EACA,SAAU,CAAC,YAAY,AACzB,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,sBACN,YAAa,gOACb,WAAY,CACV,KAAM,SACN,WAAY,CACV,KAAM,CACJ,KAAM,SACN,YAAa,8GACf,CACF,EACA,SAAU,CAAC,OAAO,AACpB,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,mBACN,YAAa,yDACb,WAAY,CACV,KAAM,SACN,WAAY,CAAC,EACb,SAAU,EAAE,AACd,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,YACN,YAAa,wGACb,WAAY,CACV,KAAM,SACN,WAAY,CACV,UAAW,CACT,KAAM,SACN,YAAa,+BACf,CACF,EACA,SAAU,CAAC,YACb,AADyB,CAE3B,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,wBACN,YAAa,wHACb,WAAY,CACV,KAAM,SACN,WAAY,CACV,UAAW,CACT,KAAM,SACN,YAAa,uFACf,CACF,EACA,SAAU,CAAC,YAAY,AACzB,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,uBACN,YAAa,uHACb,WAAY,CACV,KAAM,SACN,WAAY,CACV,UAAW,CACT,KAAM,SACN,YAAa,4FACf,CACF,EACA,SAAU,CAAC,YAAY,AACzB,CACF,CACF,EACA,CACE,KAAM,WACN,SAAU,CACR,KAAM,eACN,YAAa,8JACb,WAAY,CACV,KAAM,SACN,WAAY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","ignoreList":[0,1,2,3,4,5,6,7,13,15,16,17,18]}